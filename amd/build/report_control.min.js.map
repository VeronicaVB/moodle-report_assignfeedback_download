{"version":3,"sources":["../src/report_control.js"],"names":["define","Controls","prototype","main","self","selectaction","selectall","document","getElementById","addEventListener","checkedhandler","e","Y","log","t","userids","Array","from","rows","forEach","tr","checkbox","cells","firstChild","setAttribute","users","getAttribute","split","push","length","form","selectedusers","querySelector","value","init","control"],"mappings":"AAwBAA,OAAM,sCAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,UAAxB,CAAD,CAAsC,UAAwB,CAClE,aAQA,QAASC,CAAAA,CAAT,EAAoB,CACP,IACZ,CAMDA,CAAQ,CAACC,SAAT,CAAmBC,IAAnB,CAA0B,UAAY,CACpC,GAAIC,CAAAA,CAAI,CAAG,IAAX,CACAA,CAAI,CAACC,YAAL,EACD,CAHD,CAKAJ,CAAQ,CAACC,SAAT,CAAmBG,YAAnB,CAAkC,UAAY,IACxCD,CAAAA,CAAI,CAAG,IADiC,CAExCE,CAAS,CAAGC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAF4B,CAG5CF,CAAS,CAACG,gBAAV,CAA2B,OAA3B,CAAoCL,CAAI,CAACM,cAAzC,CACD,CAJD,CAMAT,CAAQ,CAACC,SAAT,CAAmBQ,cAAnB,CAAoC,SAAUC,CAAV,CAAa,CAC/CC,CAAC,CAACC,GAAF,CAAMF,CAAN,EAGA,GAAIG,CAAAA,CAAC,CAAGP,QAAQ,CAACC,cAAT,CAAwB,eAAxB,CAAR,CACA,GAAIM,CAAJ,CAAO,CACL,GAAIC,CAAAA,CAAO,CAAG,EAAd,CACAC,KAAK,CAACC,IAAN,CAAWH,CAAC,CAACI,IAAb,EAAmBC,OAAnB,CAA2B,SAACC,CAAD,CAAQ,CACjC,GAAMC,CAAAA,CAAQ,CAAGD,CAAE,CAACE,KAAH,CAAS,CAAT,EAAYC,UAA7B,CACAF,CAAQ,CAACG,YAAT,CAAsB,SAAtB,KACA,GAAMC,CAAAA,CAAK,CAAGJ,CAAQ,CAACK,YAAT,CAAsB,IAAtB,EAA4BC,KAA5B,CAAkC,GAAlC,CAAd,CACAZ,CAAO,CAACa,IAAR,CAAaH,CAAK,CAACA,CAAK,CAACI,MAAN,CAAe,CAAhB,CAAlB,CACD,CALD,EAMAjB,CAAC,CAACC,GAAF,CAAME,CAAN,CACD,CAd8C,GAe3Ce,CAAAA,CAAI,CAAGvB,QAAQ,CAACC,cAAT,CAAwB,kBAAxB,CAfoC,CAgB3CuB,CAAa,CAAGD,CAAI,CAACE,aAAL,CAAmB,+BAAnB,CAhB2B,CAiB/CD,CAAa,CAACE,KAAd,CAAsBlB,CACvB,CAlBD,CAoBA,MAAO,CAAEmB,IAAI,CA7Cb,UAAgB,CACdtB,CAAC,CAACC,GAAF,CAAM,+BAAN,EACA,GAAIsB,CAAAA,CAAO,CAAG,GAAIlC,CAAAA,CAAlB,CACAkC,CAAO,CAAChC,IAAR,EACD,CAyCM,CACR,CAjDK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Defines the APIs used by log reports\n *\n * @package    report\n * @subpackage ibassessmentreport\n * @copyright  2021 Veronica Bermegui\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine([\"jquery\", \"core/ajax\", \"core/log\"], function ($, Ajax, Log) {\n  \"use strict\";\n\n  function init() {\n    Y.log(\"ibassessmentreport control...\");\n    var control = new Controls();\n    control.main();\n  }\n\n  function Controls() {\n    let self = this;\n  }\n\n  /**\n   * Run the controller.\n   *\n   */\n  Controls.prototype.main = function () {\n    let self = this;\n    self.selectaction();\n  };\n\n  Controls.prototype.selectaction = function () {\n    var self = this;\n    var selectall = document.getElementById(\"selectall\");\n    selectall.addEventListener(\"click\", self.checkedhandler);\n  };\n\n  Controls.prototype.checkedhandler = function (e) {\n    Y.log(e);\n\n    //  Collect all the users ids\n    var t = document.getElementById(\"ibasesstableb\");\n    if (t) {\n      var userids = [];\n      Array.from(t.rows).forEach((tr) => {\n        const checkbox = tr.cells[0].firstChild;\n        checkbox.setAttribute(\"checked\", true);\n        const users = checkbox.getAttribute(\"id\").split(\"_\");\n        userids.push(users[users.length - 1]);\n      });\n      Y.log(userids);\n    }\n    var form = document.getElementById(\"ibassessmentform\");\n    var selectedusers = form.querySelector('input[name=\"selectedusers\"]');\n    selectedusers.value = userids;\n  };\n\n  return { init: init };\n});\n"],"file":"report_control.min.js"}